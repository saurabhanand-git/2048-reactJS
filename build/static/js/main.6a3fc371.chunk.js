(this["webpackJsonptwenty-fourtyeight-react"]=this["webpackJsonptwenty-fourtyeight-react"]||[]).push([[0],{20:function(e,n,t){e.exports=t(35)},25:function(e,n,t){},26:function(e,n,t){},28:function(e,n,t){},35:function(e,n,t){"use strict";t.r(n);var a,r,i,l,o,c,s=t(0),u=t.n(s),m=t(10),d=t.n(m),f=(t(25),t(26),function(){return u.a.createElement("div",{className:"navbar"},u.a.createElement("div",{className:"navText"},"2048"))}),g=t(4),h=t.n(g),v=t(11),x=t(7),p=t(12),w=t(13),y=t(19),E=t(18),b=(t(28),t(14)),N=t(2),I=t(3),S=I.a.div(a||(a=Object(N.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n\n@media screen and (max-width: 764px){\n  flex-direction: column;\n}\n"]))),O=I.a.div(r||(r=Object(N.a)(["\n@media screen and (max-width: 764px){\n  order: 0;\n  display: flex;\n}\n"]))),k=I.a.div(i||(i=Object(N.a)(["\nwidth: 600px;\nheight: 600px;\nbackground: #80808099;\ndisplay: flex;\nflex-wrap: wrap;\nposition: relative;\n\n@media screen and (max-width: 764px){\n  width: 100vw;\n  height: 100vw;\n  max-height: 80vh;\n  max-width: 80vh;\n}\n"]))),C=I.a.div(l||(l=Object(N.a)(["\ndisplay: flex;\nflex-direction: column;\nbackground-color: grey;\nmargin: 10px;\ncolor: white;\nborder-radius: 5px;\njustify-content: center;\nalign-items: center;\n"]))),R=I.a.div(o||(o=Object(N.a)(["\n  text-align: center;\n  padding: 20px 5px;\n"]))),A=(I.a.button(c||(c=Object(N.a)(["\n  text-align: center;\n  padding: 20px 5px;\n"]))),{4:"_classic",5:"_big",6:"_bigger",8:"_huge"}),j=function(e){Object(y.a)(t,e);var n=Object(E.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).changeGrid=function(e){A[e]!==a.state.game.size&&a.startOver(e),a.setState({gridChange:!1})},a.startOver=function(e){var n=e||a.state.game.size;console.log(n);for(var t=[],r=Array(n).fill(null),i=0;i<n;i++)t.push(r.slice());a.insertNew(t,!0),a.insertNew(t,!0),a.setState({matrix:t,prev:t,score:0,prevScore:0,game:Object(x.a)(Object(x.a)({},a.state.game),{},{size:A[n]}),optedForRestart:!1,isGameWon:!1,continue:!1}),a.myRef.current.focus()},a.move=function(e,n,t){var a=e.length-1,r=n.rIndex,i=n.cIndex;if("up"===t&&0!==r)for(;0!==r&&!e[r-1][i];)e[r-1][i]=e[r][i],e[r][i]=null,r-=1;if("down"===t&&r!==a)for(;r!==a&&!e[r+1][i];)e[r+1][i]=e[r][i],e[r][i]=null,r+=1;if("right"===t&&i!==a)for(;i!==a&&!e[r][i+1];)e[r][i+1]=e[r][i],e[r][i]=null,i+=1;if("left"===t)for(;0!==i&&!e[r][i-1];)e[r][i-1]=e[r][i],e[r][i]=null,i-=1},a.merge=function(e,n,t){var r=e.slice(),i=[],l=[],o=a.state.score,c=e.length-1;if("up"===t||"down"===t)n.forEach((function(e,s){if(!i.includes(s))if(l=n.filter((function(n,t){return e.cIndex===n.cIndex?(i.push(t),e.cIndex===n.cIndex):null})),"up"===t){var u,m=0;l.forEach((function(e,n){var t=l[n+1];n!==u&&(t?e.value===t.value?(r[m][e.cIndex]=2*e.value,r[e.rIndex][e.cIndex]=2*e.value,2*e.value===2048&&a.setState({isGameWon:!0}),o+=2*e.value,r[t.rIndex][t.cIndex]=null,r[m+1][e.cIndex]=null,m+=1,u=n+1):(r[m+1][e.cIndex]=null,r[e.rIndex][e.cIndex]=null,r[m][e.cIndex]=e.value,m+=1):(r[e.rIndex][e.cIndex]=null,r[m][e.cIndex]=e.value,r[m+1]&&(r[m+1][e.cIndex]=null),m+=1,u=null))}))}else if("down"===t){var d,f=c;l.forEach((function(e,n){var t=l[n+1];t?n!==d&&(e.value===t.value?(r[f][e.cIndex]=2*e.value,o+=2*e.value,2*e.value===2048&&a.setState({isGameWon:!0}),r[t.rIndex][t.cIndex]=null,r[f-1][e.cIndex]=null,f-=1,d=n+1):(r[f][e.cIndex]=e.value,r[f-1][e.cIndex]=null,f-=1)):n!==d&&(console.log(e.rIndex,e.cIndex),r[e.rIndex][e.cIndex]=null,r[f][e.cIndex]=e.value,r[f-1]&&(r[f-1][e.cIndex]=null),f-=1)}))}}));else if("right"===t||"left"===t)if("right"===t){for(var s=0;s<r.length;s++)for(var u=r[s].length-1;u>=0;u--)0!==u&&r[s][u]&&r[s][u]===r[s][u-1]&&(2*r[s][u]===2048&&a.setState({isGameWon:!0}),r[s][u]=2*r[s][u],o+=2*r[s][u],r[s][u-1]=null);for(var m=0;m<r.length;m++)for(var d=r[m].length-1;d>=0;d--)0!==d&&!r[m][d]&&r[m][d-1]&&(r[m][d]=r[m][d-1],r[m][d-1]=null)}else{for(var f=0;f<r.length;f++)for(var g=0;g<=r[f].length-1;g++)g!==r[f].length&&r[f][g]&&r[f][g]===r[f][g+1]&&(2*r[f][g]===2048&&a.setState({isGameWon:!0}),r[f][g]=2*r[f][g],o+=2*r[f][g],r[f][g+1]=null);for(var h=0;h<r.length;h++)for(var v=0;v<=r[h].length-1;v++)v!==r[h].length-1&&!r[h][v]&&r[h][v+1]&&(r[h][v]=r[h][v+1],r[h][v+1]=null)}return o},a.random=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},a.containsNull=function(e){return!!e.map((function(e){return e.some((function(e){return!e}))})).includes(!0)},a.insertNew=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.length-1,r=!!n||JSON.stringify(e)!==JSON.stringify(a.state.matrix);if(r&&a.containsNull(e)){for(var i=Math.random()<.9?2:4,l=a.random(0,t),o=a.random(0,t);e[l][o];)l=a.random(0,t),o=a.random(0,t);e[l][o]=i}},a.undoAction=function(){a.setState({matrix:a.state.prev,score:a.state.prevScore}),a.myRef.current.focus()},a.swipeToKeyboardEmulator=function(e){var n=e.dir.toLowerCase();"left"===n?a.handleKeyDown({key:"ArrowLeft"}):"right"===n?a.handleKeyDown({key:"ArrowRight"}):"up"===n?a.handleKeyDown({key:"ArrowUp"}):"down"===n&&a.handleKeyDown({key:"ArrowDown"})},a.handleKeyDown=function(){var e=Object(v.a)(h.a.mark((function e(n){var t,r,i,l,o,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"ArrowLeft"!==(t=n.key)&&"ArrowRight"!==t&&"ArrowUp"!==t&&"ArrowDown"!==t||(i=[],l=a.state.score,(o=function e(n){return n.map((function(n){return Array.isArray(n)?e(n):n}))}(a.state.matrix)).forEach((function(e,n){e.forEach((function(e,t){null!==e&&i.push({rIndex:n,cIndex:t,value:e})}))})),"ArrowLeft"===t?(i.forEach((function(e){a.move(o,e,"left")})),r=a.merge(o,i,"left"),(c=JSON.stringify(o)!==JSON.stringify(a.state.matrix))&&a.insertNew(o)):"ArrowUp"===t?(i.forEach((function(e){a.move(o,e,"up")})),r=a.merge(o,i,"up"),(c=JSON.stringify(o)!==JSON.stringify(a.state.matrix))&&a.insertNew(o)):"ArrowRight"===t?((s=i.slice().sort((function(e,n){return e.cIndex>n.cIndex?-1:(e.cIndex,n.cIndex,1)}))).forEach((function(e){a.move(o,e,"right")})),r=a.merge(o,s,"right"),(c=JSON.stringify(o)!==JSON.stringify(a.state.matrix))&&a.insertNew(o)):"ArrowDown"===t&&(i.slice().reverse().forEach((function(e){a.move(o,e,"down")})),r=a.merge(o,i.slice().reverse(),"down"),(c=JSON.stringify(o)!==JSON.stringify(a.state.matrix))&&a.insertNew(o)),c&&a.setState({prev:a.state.matrix,matrix:o,score:r,prevScore:l}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a.onUnload=function(e){e.preventDefault(),e.returnValue=""},a.myRef=u.a.createRef(),a.state={game:{size:"_classic"},matrix:[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],prev:[],score:0,prevScore:0,gridChange:!1,optedForRestart:!1},a}return Object(w.a)(t,[{key:"componentDidMount",value:function(){this.startOver(4)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement(S,{onFocus:function(){return e.myRef.current.focus()}},u.a.createElement(O,null,u.a.createElement("button",{onClick:this.undoAction,className:"game-btn undo-btn",title:"Undo last move"}),u.a.createElement("button",{onClick:function(){return e.setState({optedForRestart:!e.state.optedForRestart,gridChange:!1})},className:"game-btn refresh-btn",title:"Reset the game"}),u.a.createElement("button",{onClick:function(){return e.setState({optedForRestart:!1,gridChange:!e.state.gridChange})},className:"game-btn grid-btn",title:"Change grid size"})),u.a.createElement(b.a,{onSwiped:function(n){return e.swipeToKeyboardEmulator(n)},preventDefaultTouchmoveEvent:!0},u.a.createElement(k,{ref:this.myRef,onBlur:function(){return e.setState({focus:!1})},onFocus:function(){return e.setState({focus:!0})},onKeyDown:function(n){return e.handleKeyDown(n)},tabIndex:"0"},this.state.isGameWon&&!this.state.continue&&u.a.createElement("div",{className:"game-won"},u.a.createElement("div",null,"Game Won!"),u.a.createElement("div",{className:"game-reset option",onClick:function(){return e.setState({continue:!0})},style:{fontSize:"20px",fontWeight:"600"}},"Continue")),this.state.isGameOver&&u.a.createElement("div",{className:"game-won"},"Game Over!"),this.state.optedForRestart&&u.a.createElement("div",{className:"game-won",style:{flexDirection:"column"}},"Restart?",u.a.createElement("div",{style:{display:"flex",fontSize:"50px",width:"inherit",justifyContent:"space-around"}},u.a.createElement("div",{className:"game-reset option",onClick:function(){return e.startOver(4)}},"Yes"),u.a.createElement("div",{className:"game-reset option",onClick:function(){return e.setState({optedForRestart:!1})}},"No"))),this.state.gridChange&&u.a.createElement("div",null,u.a.createElement("div",{className:"change-grid"},u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"option"+("_classic"===this.state.game.size?" selected":""),onClick:function(){return e.changeGrid(4)}},"Classic ",u.a.createElement("br",null),"(4x4)")),u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"option"+("_big"===this.state.game.size?" selected":""),onClick:function(){return e.changeGrid(5)}},"Big ",u.a.createElement("br",null),"(5x5)")),u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"option"+("_bigger"===this.state.game.size?" selected":""),onClick:function(){return e.changeGrid(6)}},"Bigger ",u.a.createElement("br",null),"(6x6)")),u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"option"+("_huge"===this.state.game.size?" selected":""),onClick:function(){return e.changeGrid(8)}},"Huge ",u.a.createElement("br",null),"(8x8)")))),this.state.matrix.map((function(n,t){return n.map((function(n,a){return u.a.createElement("div",{key:t+"-"+a,className:"block "+(null!==n?"exists ":"")+e.state.game.size},u.a.createElement("div",{className:"inner _"+(null!==e.state.matrix[t][a]?e.state.matrix[t][a]:"")},e.state.matrix[t][a]))}))})))),u.a.createElement(C,null,u.a.createElement(R,null,"SCORE",u.a.createElement("h3",{style:{margin:0}},this.state.score)))),!this.state.focus&&u.a.createElement("p",{style:{textAlign:"center",color:"#fff"}},"Tap on any block to continue playing"))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(f,null),u.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.6a3fc371.chunk.js.map